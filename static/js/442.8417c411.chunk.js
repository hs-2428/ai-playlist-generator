/*! For license information please see 442.8417c411.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[442],{340:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(784).A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},442:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(555),r=a(43),o=a(99),n=a(830),l=a(784);const i=(0,l.A)("music-2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);var c=a(862),d=a(340);const m=(0,l.A)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);var u=a(677),x=a(579);const y=e=>{let{track:t,onPlay:a,isCurrentTrack:s,isPlaying:o}=e;const l=(0,r.useRef)(null),[i,c]=(0,r.useState)(.7),[y,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(0),[v,g]=(0,r.useState)(0);(0,r.useEffect)(()=>{const e=l.current;if(!e)return;const t=()=>f(e.currentTime),a=()=>g(e.duration);return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",a),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",a)}},[]),(0,r.useEffect)(()=>{const e=l.current;e&&(s&&o?e.play().catch(console.error):e.pause())},[s,o]),(0,r.useEffect)(()=>{const e=l.current;e&&(e.volume=y?0:i)},[i,y]);const b=e=>{if(isNaN(e))return"0:00";const t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))};return t.preview_url?(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("audio",{ref:l,src:t.preview_url,preload:"metadata"}),(0,x.jsx)("button",{onClick:()=>{t.preview_url&&a(t)},className:"w-8 h-8 rounded-full flex items-center justify-center transition-all hover:scale-110",style:{background:s&&o?"var(--accent-gradient)":"var(--border-color)"},children:s&&o?(0,x.jsx)(d.A,{size:14,style:{color:"#fff"}}):(0,x.jsx)(n.A,{size:14,style:{color:"var(--text-primary)"}})}),s&&(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:b(h)}),(0,x.jsxs)("div",{className:"flex items-center gap-1",children:[(0,x.jsx)("button",{onClick:()=>{p(!y)},className:"p-1",children:y?(0,x.jsx)(m,{size:14,style:{color:"var(--text-muted)"}}):(0,x.jsx)(u.A,{size:14,style:{color:"var(--text-muted)"}})}),(0,x.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:y?0:i,onChange:e=>{const t=parseFloat(e.target.value);c(t),p(0===t)},className:"w-16 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{background:"linear-gradient(to right, var(--accent-color) 0%, var(--accent-color) ".concat(100*i,"%, var(--border-color) ").concat(100*i,"%, var(--border-color) 100%)")}})]}),(0,x.jsx)("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:b(v)})]})]}):(0,x.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[(0,x.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"var(--border-color)"},children:(0,x.jsx)(n.A,{size:14,style:{color:"var(--text-muted)"}})}),(0,x.jsx)("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:"No preview"})]})},p=()=>{const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[d,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[v,g]=(0,r.useState)(!1),b=async function(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e;if(t.trim()){l(!0),p(""),m([]);try{console.log("\ud83c\udfb5 Generating playlist for mood:",t);const e=await c.A.post("/gemini/analyze-mood",{moodDescription:t,genre:"mixed",count:20});if(console.log("\ud83e\udd16 AI Analysis:",e.data),!(e.data.tracks&&e.data.tracks.length>0))throw new Error("AI could not generate recommendations for this mood");{const a=e.data.tracks.map(async e=>{try{const t=await c.A.post("/spotify/search",{query:"".concat(e.title," ").concat(e.artist),limit:1});return t.data.tracks&&t.data.tracks.length>0?(0,s.A)((0,s.A)({},t.data.tracks[0]),{},{aiReason:e.reason||"Perfect for your mood"}):null}catch(u){return console.warn("Failed to find track on Spotify:",e,u),null}}),r=(await Promise.all(a)).filter(Boolean);if(!(r.length>0))throw new Error("No tracks found on Spotify for the AI recommendations");{const a={name:e.data.playlistName||"".concat(t," Playlist"),description:e.data.description||"A personalized playlist for your ".concat(t," mood"),tracks:r,mood:t,createdAt:new Date,totalTracks:r.length,duration:r.reduce((e,t)=>e+(t.duration_ms||0),0)};m([a]),console.log("\u2705 Playlist generated successfully:",a)}}}catch(u){var a,r;console.error("\u274c Playlist generation failed:",u);let s="Failed to generate playlist. ";401===(null===(a=u.response)||void 0===a?void 0:a.status)?s+="Authentication failed. Please sign in again.":429===(null===(r=u.response)||void 0===r?void 0:r.status)?s+="Too many requests. Please wait a moment and try again.":u.message.includes("AI could not generate")?s+="Try describing your mood differently or be more specific.":u.message.includes("No tracks found")?s+="Try a different mood or more common music preferences.":s+=u.message||"Please check your connection and try again.",p(s),console.log("\ud83d\udd04 Falling back to demo data...");const o=[{name:"Good as Hell",artist:"Lizzo",album:"Cuz I Love You",duration_ms:219e3},{name:"Uptown Funk",artist:"Mark Ronson ft. Bruno Mars",album:"Uptown Special",duration_ms:27e4},{name:"Can't Stop the Feeling!",artist:"Justin Timberlake",album:"Trolls Soundtrack",duration_ms:236e3},{name:"Happy",artist:"Pharrell Williams",album:"G I R L",duration_ms:232e3},{name:"Walking on Sunshine",artist:"Katrina and the Waves",album:"Walking on Sunshine",duration_ms:239e3}];m([{name:"".concat(t," Vibes"),description:"A personalized playlist for your ".concat(t," mood"),mood:t,tracks:o,createdAt:new Date,totalTracks:o.length,duration:o.reduce((e,t)=>e+t.duration_ms,0)}])}finally{l(!1)}}else p("Please describe your mood or what type of music you want!")},j=e=>{const t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3);return"".concat(t,":").concat(a.toString().padStart(2,"0"))},k=e=>{h&&h.spotifyId===e.spotifyId&&v?g(!1):(f(e),g(!0))};return(0,x.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,x.jsxs)("div",{className:"text-center mb-12",children:[(0,x.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,x.jsx)("div",{style:{background:"var(--accent-gradient)",padding:"12px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.jsx)(o.A,{size:28,style:{color:"#fff"}})}),(0,x.jsx)("h1",{className:"text-4xl font-bold",style:{color:"var(--text-primary)"},children:"AI Playlist Generator"})]}),(0,x.jsx)("p",{className:"text-xl",style:{color:"var(--text-secondary)"},children:"Describe your mood and let AI create the perfect playlist for you"})]}),(0,x.jsxs)("div",{className:"glass-card p-8 rounded-3xl mb-8",children:[(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b()},className:"space-y-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-lg font-semibold mb-3",style:{color:"var(--text-primary)"},children:"How are you feeling? What's your vibe?"}),(0,x.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"E.g., I'm feeling nostalgic and want something mellow, or I need high-energy music for my workout...",className:"w-full p-4 rounded-2xl border-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",style:{background:"var(--input-bg)",color:"var(--text-primary)",borderColor:"var(--border-color)",minHeight:"120px"},disabled:a})]}),(0,x.jsx)("button",{type:"submit",disabled:a||!e.trim(),className:"btn btn-primary w-full py-4 text-lg font-semibold rounded-2xl transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating Your Perfect Playlist..."]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.A,{size:20}),"Generate Playlist"]})})]}),(0,x.jsxs)("div",{className:"mt-8",children:[(0,x.jsx)("p",{className:"text-center mb-4",style:{color:"var(--text-secondary)"},children:"Or try one of these moods:"}),(0,x.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:["Happy & Energetic","Chill & Relaxed","Workout Mode","Study Focus","Romantic Evening","Road Trip","Melancholy","Party Time"].map(e=>(0,x.jsx)("button",{onClick:()=>b(e),disabled:a,className:"px-4 py-2 rounded-full border-2 transition-all hover:scale-105 disabled:opacity-50",style:{background:"var(--bg-secondary)",color:"var(--text-primary)",borderColor:"var(--border-color)"},children:e},e))})]})]}),u&&(0,x.jsx)("div",{className:"glass-card p-6 rounded-2xl mb-6 border-l-4 border-red-500",style:{background:"rgba(239, 68, 68, 0.1)"},children:(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("i",{className:"fas fa-exclamation-triangle text-red-400 text-xl"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"font-semibold text-red-300",children:"Oops! Something went wrong"}),(0,x.jsx)("p",{className:"text-red-200 mt-1",children:u})]})]})}),d.map((e,t)=>(0,x.jsxs)("div",{className:"glass-card p-8 rounded-3xl",children:[(0,x.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:e.name}),(0,x.jsx)("p",{className:"mb-2",style:{color:"var(--text-secondary)"},children:e.description}),(0,x.jsxs)("div",{className:"flex items-center gap-4 text-sm",style:{color:"var(--text-muted)"},children:[(0,x.jsxs)("span",{children:[e.totalTracks," tracks"]}),(0,x.jsx)("span",{children:"\u2022"}),(0,x.jsxs)("span",{children:[Math.round(e.duration/6e4)," minutes"]})]})]}),(0,x.jsxs)("button",{className:"btn btn-outline px-6 py-2 rounded-full flex items-center gap-2",children:[(0,x.jsx)(n.A,{size:16}),"Save Playlist"]})]}),(0,x.jsx)("div",{className:"space-y-3",children:e.tracks.map((e,t)=>(0,x.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-xl hover:bg-white hover:bg-opacity-5 transition-all",children:[(0,x.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"var(--accent-gradient)",color:"#fff",fontSize:"0.8rem",fontWeight:"bold"},children:t+1}),(0,x.jsx)(i,{size:20,style:{color:"var(--text-muted)"}}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:e.name}),(0,x.jsxs)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[e.artist," \u2022 ",e.album]}),e.aiReason&&(0,x.jsx)("div",{className:"text-xs mt-1 italic",style:{color:"var(--text-muted)"},children:e.aiReason})]}),(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)(y,{track:e,onPlay:k,isCurrentTrack:h&&h.spotifyId===e.spotifyId,isPlaying:v}),(0,x.jsx)("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:e.duration_ms?j(e.duration_ms):"3:30"})]})]},t))})]},t))]})}},677:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(784).A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},830:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(784).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},862:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(722);const r={NODE_ENV:"production",PUBLIC_URL:"/ai-playlist-generator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_Y2xvc2luZy1ob3JzZS00LmNsZXJrLmFjY291bnRzLmRldiQ",REACT_APP_API_BASE_URL:"https://ai-playlist-generator-la8z.onrender.com/api",REACT_APP_SPOTIFY_CLIENT_ID:"your_spotify_client_id_here",REACT_APP_ENV:"development"}.REACT_APP_API_URL||"http://localhost:5000/api",o=s.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{var t,a;const s=null===(t=window.Clerk)||void 0===t||null===(a=t.session)||void 0===a?void 0:a.getToken();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var t,a;401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(null===(a=window.Clerk)||void 0===a||a.signOut());return Promise.reject(e)});const n=o}}]);
//# sourceMappingURL=442.8417c411.chunk.js.map